<p-panel>
  <ng-template pTemplate="header"
    ><h1 class="m-0 p-0 text-base text-primary">
      @if(id()) {
      {{ "TRANSACTION.FORM.EDIT" | translate }}

      } @else {
      {{ "TRANSACTION.FORM.NEW" | translate }}
      }
    </h1></ng-template
  >

  <form class="my-3" [formGroup]="formGroup">
    <div class="grid">
      <div class="col-12 md:col-6" formGroupName="category">
        <app-input
          formControlName="id"
          type="dropdown"
          [label]="'COMMON.CATEGORY' | translate"
          [dropdownData]="categories()"
          [showClear]="false"
        />
      </div>

      <div class="col-12 sm:col-6 md:col-3">
        <app-input
          formControlName="originCurrency"
          type="dropdown"
          [label]="'COMMON.ORIGIN_CURRENCY' | translate"
          [dropdownData]="currencies()"
          [showClear]="false"
        />
      </div>

      <div class="col-12 sm:col-6 md:col-3">
        <app-input
          formControlName="destinationCurrency"
          type="dropdown"
          [label]="'COMMON.DESTINY_CURRENCY' | translate"
          [dropdownData]="currencies()"
          [showClear]="false"
        />
      </div>

      <div class="col-12 sm:col-6 md:col-3">
        <app-input
          formControlName="transactionType"
          type="dropdown"
          [label]="'COMMON.TRANSACTION_TYPE' | translate"
          [dropdownData]="transactionTypes()"
          [showClear]="false"
          [hideErrorMessage]="hideErrorMessage()"
        />
      </div>

      <div class="col-12 sm:col-6 md:col-3" formGroupName="customerBankAccount">
        <app-input
          formControlName="id"
          type="dropdown"
          [label]="'COMMON.BANK_ACCOUNT' | translate"
          [dropdownData]="customerAccounts()"
          [showClear]="false"
        />
      </div>

      <div class="col-12 md:col-6">
        <app-input
          formControlName="billet"
          type="currency"
          [label]="'COMMON.BILLET_VALUE' | translate"
        />
      </div>

      <div class="col-12 md:col-6">
        <app-input
          formControlName="description"
          [label]="'COMMON.DESCRIPTION' | translate"
        />
      </div>

      <div class="col-12 md:col-6">
        <app-input
          formControlName="amount"
          type="currency"
          [label]="'COMMON.VALUE' | translate"
          [currency]="originCurrency()"
        />
      </div>

      <div class="col-12 md:col-6">
        <app-input
          formControlName="totalAmount"
          type="currency"
          [label]="'COMMON.TOTAL_VALUE' | translate"
          [currency]="originCurrency()"
        />
      </div>

      <div class="col-12 md:col-6">
        <app-input
          formControlName="convertedAmount"
          type="currency"
          [label]="'COMMON.CONVERTED_VALUE' | translate"
          [currency]="destinationCurrency()"
        />
      </div>
    </div>

    <div class="flex flex-column sm:flex-row gap-3 justify-content-end mt-3">
      @if(id()) {
      <app-button
        severity="danger"
        [label]="'COMMON.CANCEL' | translate"
        styleClass="w-full sm:w-auto"
        [outlined]="true"
        [routerLink]="['/app', 'transaction']"
      ></app-button>
      }

      <app-button
        severity="success"
        [label]="'COMMON.SAVE' | translate"
        styleClass="w-full sm:w-auto"
        [disabled]="formGroup.invalid || formGroup.pristine"
        [loading]="loading()"
        [outlined]="true"
        (onClick)="save()"
      ></app-button>
    </div>
  </form>
</p-panel>
